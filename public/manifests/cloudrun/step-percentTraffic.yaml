template:
  name: Percent Traffic to Latest
  identifier: Percent_Traffic_to_Latest
  versionLabel: "1"
  type: Step
  tags: {}
  spec:
    timeout: 10m
    type: ShellScript
    spec:
      shell: Bash
      executionTarget: {}
      delegateSelectors: []
      source:
        type: Inline
        spec:
          script: |-
            set -ex
            /opt/harness-delegate/google-cloud-sdk/bin/gcloud run services update-traffic <+service.name> \
            --region=<+infra.variables.googleRegion> \
            --project=<+infra.variables.googleProject> \
            --to-revisions=LATEST=<+spec.environmentVariables.percentTraffic>
      environmentVariables:
        - name: percentTraffic
          type: String
          value: <+input>
      outputVariables: []
  icon: data:image/png;base64,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
